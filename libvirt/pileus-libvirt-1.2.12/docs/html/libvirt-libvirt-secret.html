<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!--
        This file is autogenerated from html/libvirt-libvirt-secret.html.in
        Do not edit this file. Changes will be lost.
      --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" type="text/css" href="../main.css" /><link rel="SHORTCUT ICON" href="../32favicon.png" /><title>libvirt: Module libvirt-secret from libvirt</title><meta name="description" content="libvirt, virtualization, virtualization API" /></head><body><div id="header"><div id="headerLogo"></div><div id="headerSearch"><form action="../search.php" enctype="application/x-www-form-urlencoded" method="get"><div><input id="query" name="query" type="text" size="12" value="" /><input id="submit" name="submit" type="submit" value="Search" /></div></form></div></div><div id="body"><div id="menu"><ul class="l0"><li><div><a title="Front page of the libvirt website" class="inactive" href="../index.html">Home</a></div></li><li><div><a title="Details of new features and bugs fixed in each release" class="inactive" href="../news.html">News</a></div></li><li><div><a title="Applications known to use libvirt" class="inactive" href="../apps.html">Applications</a></div></li><li><div><a title="Get the latest source releases, binary builds and get access to the source repository" class="inactive" href="../downloads.html">Downloads</a></div></li><li><div><a title="Information for users, administrators and developers" class="active" href="../docs.html">Documentation</a><ul class="l1"><li><div><a title="How to compile libvirt" class="inactive" href="../compiling.html">Compiling</a></div></li><li><div><a title="Information about deploying and using libvirt" class="inactive" href="../deployment.html">Deployment</a></div></li><li><div><a title="Overview of the logical subsystems in the libvirt API" class="inactive" href="../intro.html">Architecture</a></div></li><li><div><a title="Description of the XML formats used in libvirt" class="inactive" href="../format.html">XML format</a></div></li><li><div><a title="Hypervisor specific driver information" class="inactive" href="../drivers.html">Drivers</a></div></li><li><div><a title="Reference manual for the C public API" class="active" href="../html/index.html">API reference</a><ul class="l2"><li><div><a title="domain APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-domain.html">Domain</a></div></li><li><div><a title="domain snapshot APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-domain-snapshot.html">Domain snapshot</a></div></li><li><div><a title="error handling APIs for the libvirt library" class="inactive" href="../html/libvirt-virterror.html">Error</a></div></li><li><div><a title="event APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-event.html">Event</a></div></li><li><div><a title="host APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-host.html">Host</a></div></li><li><div><a title="interface APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-interface.html">Interface</a></div></li><li><div><a title="network APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-network.html">Network</a></div></li><li><div><a title="node device APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-nodedev.html">Node device</a></div></li><li><div><a title="network filter APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-nwfilter.html">Network filter</a></div></li><li><div><span class="active">Secret</span></div></li><li><div><a title="storage APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-storage.html">Storage</a></div></li><li><div><a title="stream APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-stream.html">Stream</a></div></li><li><div><a title="matrix of API support per hypervisor per release" class="inactive" href="../hvsupport.html">Driver support</a></div></li></ul></div></li><li><div><a title="Bindings of the libvirt API for other languages" class="inactive" href="../bindings.html">Language bindings</a></div></li><li><div><a title="Working on the internals of libvirt API, driver and daemon code" class="inactive" href="../internals.html">Internals</a></div></li><li><div><a title="A guide and reference for developing with libvirt" class="inactive" href="../devguide.html">Development Guide</a></div></li><li><div><a title="Command reference for virsh" class="inactive" href="../virshcmdref.html">Virsh Commands</a></div></li><li><div><a title="Project governance and code of conduct" class="inactive" href="../governance.html">Governance</a></div></li></ul></div></li><li><div><a title="User contributed content" class="inactive" href="http://wiki.libvirt.org">Wiki</a></div></li><li><div><a title="Frequently asked questions" class="inactive" href="http://wiki.libvirt.org/page/FAQ">FAQ</a></div></li><li><div><a title="How and where to report bugs and request features" class="inactive" href="../bugs.html">Bug reports</a></div></li><li><div><a title="How to contact the developers via email and IRC" class="inactive" href="../contact.html">Contact</a></div></li><li><div><a title="Available test suites for libvirt" class="inactive" href="../testsuites.html">Test suites</a></div></li><li><div><a title="Miscellaneous links of interest related to libvirt" class="inactive" href="../relatedlinks.html">Related Links</a></div></li><li><div><a title="Overview of all content on the website" class="inactive" href="../sitemap.html">Sitemap</a></div></li></ul></div><div id="content"><h1>Module libvirt-secret from libvirt</h1><p>Provides APIs for the management of secrets</p><h2>Table of Contents</h2><h3><a href="#types">Types</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="keyword">enum</span> <a href="#virConnectListAllSecretsFlags">virConnectListAllSecretsFlags</a>
<span class="keyword">typedef</span> <span class="type">struct _virSecret</span> <a href="#virSecret">virSecret</a>
<span class="keyword">typedef</span> <span class="type"><a href="libvirt-libvirt-secret.html#virSecret">virSecret</a> *</span> <a name="virSecretPtr" id="virSecretPtr">virSecretPtr</a>
<span class="keyword">typedef</span> <span class="keyword">enum</span> <a href="#virSecretUsageType">virSecretUsageType</a>
</pre><h3><a href="#functions">Functions</a></h3><pre class="api"><span class="type">int</span>	<a href="#virConnectListAllSecrets">virConnectListAllSecrets</a>	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn, <br />					 <span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a> **</span> secrets, <br />					 <span class="type">unsigned int</span> flags)
<span class="type">int</span>	<a href="#virConnectListSecrets">virConnectListSecrets</a>		(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn, <br />					 <span class="type">char **</span> uuids, <br />					 <span class="type">int</span> maxuuids)
<span class="type">int</span>	<a href="#virConnectNumOfSecrets">virConnectNumOfSecrets</a>		(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn)
<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span>	<a href="#virSecretDefineXML">virSecretDefineXML</a>	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn, <br />					 <span class="type">const char *</span> xml, <br />					 <span class="type">unsigned int</span> flags)
<span class="type">int</span>	<a href="#virSecretFree">virSecretFree</a>			(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)
<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span>	<a href="#virSecretGetConnect">virSecretGetConnect</a>	(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)
<span class="type">int</span>	<a href="#virSecretGetUUID">virSecretGetUUID</a>		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret, <br />					 <span class="type">unsigned char *</span> uuid)
<span class="type">int</span>	<a href="#virSecretGetUUIDString">virSecretGetUUIDString</a>		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret, <br />					 <span class="type">char *</span> buf)
<span class="type">const char *</span>	<a href="#virSecretGetUsageID">virSecretGetUsageID</a>	(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)
<span class="type">int</span>	<a href="#virSecretGetUsageType">virSecretGetUsageType</a>		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)
<span class="type">unsigned char *</span>	<a href="#virSecretGetValue">virSecretGetValue</a>	(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret, <br />					 <span class="type">size_t *</span> value_size, <br />					 <span class="type">unsigned int</span> flags)
<span class="type">char *</span>	<a href="#virSecretGetXMLDesc">virSecretGetXMLDesc</a>		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret, <br />					 <span class="type">unsigned int</span> flags)
<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span>	<a href="#virSecretLookupByUUID">virSecretLookupByUUID</a>	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn, <br />					 <span class="type">const unsigned char *</span> uuid)
<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span>	<a href="#virSecretLookupByUUIDString">virSecretLookupByUUIDString</a>	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn, <br />						 <span class="type">const char *</span> uuidstr)
<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span>	<a href="#virSecretLookupByUsage">virSecretLookupByUsage</a>	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn, <br />					 <span class="type">int</span> usageType, <br />					 <span class="type">const char *</span> usageID)
<span class="type">int</span>	<a href="#virSecretRef">virSecretRef</a>			(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)
<span class="type">int</span>	<a href="#virSecretSetValue">virSecretSetValue</a>		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret, <br />					 <span class="type">const unsigned char *</span> value, <br />					 <span class="type">size_t</span> value_size, <br />					 <span class="type">unsigned int</span> flags)
<span class="type">int</span>	<a href="#virSecretUndefine">virSecretUndefine</a>		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)
</pre><h2>Description</h2><h3><a name="types" id="types">Types</a><a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3><h3><a name="virConnectListAllSecretsFlags" id="virConnectListAllSecretsFlags"><code>virConnectListAllSecretsFlags</code></a><a class="headerlink" href="#virConnectListAllSecretsFlags" title="Permalink to this headline">¶</a></h3><div class="api"><pre><span class="keyword">enum</span> virConnectListAllSecretsFlags {
</pre><table><tr><td><a name="VIR_CONNECT_LIST_SECRETS_EPHEMERAL" id="VIR_CONNECT_LIST_SECRETS_EPHEMERAL">VIR_CONNECT_LIST_SECRETS_EPHEMERAL</a></td><td> = </td><td>1</td><td><div class="comment">kept in memory, never stored persistently</div></td></tr><tr><td><a name="VIR_CONNECT_LIST_SECRETS_NO_EPHEMERAL" id="VIR_CONNECT_LIST_SECRETS_NO_EPHEMERAL">VIR_CONNECT_LIST_SECRETS_NO_EPHEMERAL</a></td><td> = </td><td>2</td></tr><tr><td><a name="VIR_CONNECT_LIST_SECRETS_PRIVATE" id="VIR_CONNECT_LIST_SECRETS_PRIVATE">VIR_CONNECT_LIST_SECRETS_PRIVATE</a></td><td> = </td><td>4</td><td><div class="comment">not revealed to any caller of libvirt, nor to any other node</div></td></tr><tr><td><a name="VIR_CONNECT_LIST_SECRETS_NO_PRIVATE" id="VIR_CONNECT_LIST_SECRETS_NO_PRIVATE">VIR_CONNECT_LIST_SECRETS_NO_PRIVATE</a></td><td> = </td><td>8</td></tr></table><pre>}
</pre></div><h3><a name="virSecret" id="virSecret"><code>virSecret</code></a><a class="headerlink" href="#virSecret" title="Permalink to this headline">¶</a></h3><div class="api"><pre><span class="keyword">struct </span>virSecret {
</pre><div class="undisclosed">The content of this structure is not made public by the API</div><pre>
}
</pre></div><h3><a name="virSecretUsageType" id="virSecretUsageType"><code>virSecretUsageType</code></a><a class="headerlink" href="#virSecretUsageType" title="Permalink to this headline">¶</a></h3><div class="api"><pre><span class="keyword">enum</span> virSecretUsageType {
</pre><table><tr><td><a name="VIR_SECRET_USAGE_TYPE_NONE" id="VIR_SECRET_USAGE_TYPE_NONE">VIR_SECRET_USAGE_TYPE_NONE</a></td><td> = </td><td>0</td></tr><tr><td><a name="VIR_SECRET_USAGE_TYPE_VOLUME" id="VIR_SECRET_USAGE_TYPE_VOLUME">VIR_SECRET_USAGE_TYPE_VOLUME</a></td><td> = </td><td>1</td></tr><tr><td><a name="VIR_SECRET_USAGE_TYPE_CEPH" id="VIR_SECRET_USAGE_TYPE_CEPH">VIR_SECRET_USAGE_TYPE_CEPH</a></td><td> = </td><td>2</td></tr><tr><td><a name="VIR_SECRET_USAGE_TYPE_ISCSI" id="VIR_SECRET_USAGE_TYPE_ISCSI">VIR_SECRET_USAGE_TYPE_ISCSI</a></td><td> = </td><td>3</td></tr><tr><td><a name="VIR_SECRET_USAGE_TYPE_LAST" id="VIR_SECRET_USAGE_TYPE_LAST">VIR_SECRET_USAGE_TYPE_LAST</a></td><td> = </td><td>4</td><td><div class="comment">NB: this enum value will increase over time as new events are added to the libvirt API. It reflects the last secret owner ID supported by this version of the libvirt API.</div></td></tr></table><pre>}
</pre></div><h3><a name="functions" id="functions">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3><h3><a name="virConnectListAllSecrets" id="virConnectListAllSecrets"><code>virConnectListAllSecrets</code></a><a class="headerlink" href="#virConnectListAllSecrets" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virConnectListAllSecrets	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn,
					 <span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a> **</span> secrets,
					 <span class="type">unsigned int</span> flags)</pre><div class="description"><p>Collect the list of secrets, and allocate an array to store those objects.</p><p>Normally, all secrets are returned; however, @flags can be used to filter the results for a smaller list of targeted secrets. The valid flags are divided into groups, where each group contains bits that describe mutually exclusive attributes of a secret, and where all bits within a group describe all possible secrets.</p><p>The first group of @flags is used to filter secrets by its storage location. Flag <a href="libvirt-libvirt-secret.html#VIR_CONNECT_LIST_SECRETS_EPHEMERAL">VIR_CONNECT_LIST_SECRETS_EPHEMERAL</a> selects secrets that are kept only in memory. Flag <a href="libvirt-libvirt-secret.html#VIR_CONNECT_LIST_SECRETS_NO_EPHEMERAL">VIR_CONNECT_LIST_SECRETS_NO_EPHEMERAL</a> selects secrets that are kept in persistent storage.</p><p>The second group of @flags is used to filter secrets by privacy. Flag <a href="libvirt-libvirt-secret.html#VIR_CONNECT_LIST_SECRETS_PRIVATE">VIR_CONNECT_LIST_SECRETS_PRIVATE</a> seclets secrets that are never revealed to any caller of libvirt nor to any other node. Flag <a href="libvirt-libvirt-secret.html#VIR_CONNECT_LIST_SECRETS_NO_PRIVATE">VIR_CONNECT_LIST_SECRETS_NO_PRIVATE</a> selects non-private secrets.</p></div><dl class="variablelist"><dt>conn</dt><dd>Pointer to the hypervisor connection.</dd><dt>secrets</dt><dd>Pointer to a variable to store the array containing the secret objects or NULL if the list is not required (just returns the number of secrets).</dd><dt>flags</dt><dd>extra flags; not used yet, so callers should always pass 0</dd><dt>Returns</dt><dd>the number of secrets found or -1 and sets @secrets to NULL in case of error. On success, the array stored into @secrets is guaranteed to have an extra allocated element set to NULL but not included in the return count, to make iteration easier. The caller is responsible for calling <a href="libvirt-libvirt-secret.html#virSecretFree">virSecretFree</a>() on each array element, then calling free() on @secrets.</dd></dl><div class="acl"></div><h3><a name="virConnectListSecrets" id="virConnectListSecrets"><code>virConnectListSecrets</code></a><a class="headerlink" href="#virConnectListSecrets" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virConnectListSecrets		(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn,
					 <span class="type">char **</span> uuids,
					 <span class="type">int</span> maxuuids)</pre><div class="description"><p>List UUIDs of defined secrets, store pointers to names in uuids.</p></div><dl class="variablelist"><dt>conn</dt><dd><a href="libvirt-libvirt-host.html#virConnect">virConnect</a> connection</dd><dt>uuids</dt><dd>Pointer to an array to store the UUIDs</dd><dt>maxuuids</dt><dd>size of the array.</dd><dt>Returns</dt><dd>the number of UUIDs provided in the array, or -1 on failure.</dd></dl><div class="acl"></div><h3><a name="virConnectNumOfSecrets" id="virConnectNumOfSecrets"><code>virConnectNumOfSecrets</code></a><a class="headerlink" href="#virConnectNumOfSecrets" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virConnectNumOfSecrets		(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn)</pre><div class="description"><p>Fetch number of currently defined secrets.</p></div><dl class="variablelist"><dt>conn</dt><dd><a href="libvirt-libvirt-host.html#virConnect">virConnect</a> connection</dd><dt>Returns</dt><dd>the number currently defined secrets.</dd></dl><div class="acl"></div><h3><a name="virSecretDefineXML" id="virSecretDefineXML"><code>virSecretDefineXML</code></a><a class="headerlink" href="#virSecretDefineXML" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span>	virSecretDefineXML	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn,
					 <span class="type">const char *</span> xml,
					 <span class="type">unsigned int</span> flags)</pre><div class="description"><p>If XML specifies a UUID, locates the specified secret and replaces all attributes of the secret specified by UUID by attributes specified in xml (any attributes not specified in xml are discarded).</p><p>Otherwise, creates a new secret with an automatically chosen UUID, and initializes its attributes from xml.</p><p><a href="libvirt-libvirt-secret.html#virSecretFree">virSecretFree</a> should be used to free the resources after the secret object is no longer needed.</p></div><dl class="variablelist"><dt>conn</dt><dd><a href="libvirt-libvirt-host.html#virConnect">virConnect</a> connection</dd><dt>xml</dt><dd>XML describing the secret.</dd><dt>flags</dt><dd>extra flags; not used yet, so callers should always pass 0</dd><dt>Returns</dt><dd>a secret on success, NULL on failure.</dd></dl><div class="acl"></div><h3><a name="virSecretFree" id="virSecretFree"><code>virSecretFree</code></a><a class="headerlink" href="#virSecretFree" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virSecretFree			(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)</pre><div class="description"><p>Release the secret handle. The underlying secret continues to exist.</p></div><dl class="variablelist"><dt>secret</dt><dd>pointer to a secret</dd><dt>Returns</dt><dd>0 on success, or -1 on error</dd></dl><div class="acl"></div><h3><a name="virSecretGetConnect" id="virSecretGetConnect"><code>virSecretGetConnect</code></a><a class="headerlink" href="#virSecretGetConnect" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span>	virSecretGetConnect	(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)</pre><div class="description"><p>Provides the connection pointer associated with a secret. The reference counter on the connection is not increased by this call.</p><p>WARNING: When writing libvirt bindings in other languages, do not use this function. Instead, store the connection and the secret object together.</p></div><dl class="variablelist"><dt>secret</dt><dd>A <a href="libvirt-libvirt-secret.html#virSecret">virSecret</a> secret</dd><dt>Returns</dt><dd>the <a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a> or NULL in case of failure.</dd></dl><div class="acl"></div><h3><a name="virSecretGetUUID" id="virSecretGetUUID"><code>virSecretGetUUID</code></a><a class="headerlink" href="#virSecretGetUUID" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virSecretGetUUID		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret,
					 <span class="type">unsigned char *</span> uuid)</pre><div class="description"><p>Fetches the UUID of the secret.</p></div><dl class="variablelist"><dt>secret</dt><dd>A <a href="libvirt-libvirt-secret.html#virSecret">virSecret</a> secret</dd><dt>uuid</dt><dd>buffer of <a href="libvirt-libvirt-host.html#VIR_UUID_BUFLEN">VIR_UUID_BUFLEN</a> bytes in size</dd><dt>Returns</dt><dd>0 on success with the uuid buffer being filled, or -1 upon failure.</dd></dl><div class="acl"></div><h3><a name="virSecretGetUUIDString" id="virSecretGetUUIDString"><code>virSecretGetUUIDString</code></a><a class="headerlink" href="#virSecretGetUUIDString" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virSecretGetUUIDString		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret,
					 <span class="type">char *</span> buf)</pre><div class="description"><p>Get the UUID for a secret as string. For more information about UUID see RFC4122.</p></div><dl class="variablelist"><dt>secret</dt><dd>a secret object</dd><dt>buf</dt><dd>pointer to a <a href="libvirt-libvirt-host.html#VIR_UUID_STRING_BUFLEN">VIR_UUID_STRING_BUFLEN</a> bytes array</dd><dt>Returns</dt><dd>-1 in case of error, 0 in case of success</dd></dl><div class="acl"></div><h3><a name="virSecretGetUsageID" id="virSecretGetUsageID"><code>virSecretGetUsageID</code></a><a class="headerlink" href="#virSecretGetUsageID" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">const char *</span>	virSecretGetUsageID	(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)</pre><div class="description"><p>Get the unique identifier of the object with which this secret is to be used. The format of the identifier is dependant on the usage type of the secret. For a secret with a usage type of <a href="libvirt-libvirt-secret.html#VIR_SECRET_USAGE_TYPE_VOLUME">VIR_SECRET_USAGE_TYPE_VOLUME</a> the identifier will be a fully qualfied path name. The identifiers are intended to be unique within the set of all secrets sharing the same usage type. ie, there shall only ever be one secret for each volume path.</p></div><dl class="variablelist"><dt>secret</dt><dd>a secret object</dd><dt>Returns</dt><dd>a string identifying the object using the secret, or NULL upon error</dd></dl><div class="acl"></div><h3><a name="virSecretGetUsageType" id="virSecretGetUsageType"><code>virSecretGetUsageType</code></a><a class="headerlink" href="#virSecretGetUsageType" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virSecretGetUsageType		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)</pre><div class="description"><p>Get the type of object which uses this secret. The returned value is one of the constants defined in the <a href="libvirt-libvirt-secret.html#virSecretUsageType">virSecretUsageType</a> enumeration. More values may be added to this enumeration in the future, so callers should expect to see usage types they do not explicitly know about.</p></div><dl class="variablelist"><dt>secret</dt><dd>a secret object</dd><dt>Returns</dt><dd>a positive integer identifying the type of object, or -1 upon error.</dd></dl><div class="acl"></div><h3><a name="virSecretGetValue" id="virSecretGetValue"><code>virSecretGetValue</code></a><a class="headerlink" href="#virSecretGetValue" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">unsigned char *</span>	virSecretGetValue	(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret,
					 <span class="type">size_t *</span> value_size,
					 <span class="type">unsigned int</span> flags)</pre><div class="description"><p>Fetches the value of a secret.</p></div><dl class="variablelist"><dt>secret</dt><dd>A <a href="libvirt-libvirt-secret.html#virSecret">virSecret</a> connection</dd><dt>value_size</dt><dd>Place for storing size of the secret value</dd><dt>flags</dt><dd>extra flags; not used yet, so callers should always pass 0</dd><dt>Returns</dt><dd>the secret value on success, NULL on failure. The caller must free() the secret value.</dd></dl><div class="acl"></div><h3><a name="virSecretGetXMLDesc" id="virSecretGetXMLDesc"><code>virSecretGetXMLDesc</code></a><a class="headerlink" href="#virSecretGetXMLDesc" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">char *</span>	virSecretGetXMLDesc		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret,
					 <span class="type">unsigned int</span> flags)</pre><div class="description"><p>Fetches an XML document describing attributes of the secret.</p></div><dl class="variablelist"><dt>secret</dt><dd>A <a href="libvirt-libvirt-secret.html#virSecret">virSecret</a> secret</dd><dt>flags</dt><dd>extra flags; not used yet, so callers should always pass 0</dd><dt>Returns</dt><dd>the XML document on success, NULL on failure. The caller must free() the XML.</dd></dl><div class="acl"></div><h3><a name="virSecretLookupByUUID" id="virSecretLookupByUUID"><code>virSecretLookupByUUID</code></a><a class="headerlink" href="#virSecretLookupByUUID" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span>	virSecretLookupByUUID	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn,
					 <span class="type">const unsigned char *</span> uuid)</pre><div class="description"><p>Try to lookup a secret on the given hypervisor based on its UUID. Uses the 16 bytes of raw data to describe the UUID</p><p><a href="libvirt-libvirt-secret.html#virSecretFree">virSecretFree</a> should be used to free the resources after the secret object is no longer needed.</p></div><dl class="variablelist"><dt>conn</dt><dd>pointer to the hypervisor connection</dd><dt>uuid</dt><dd>the raw UUID for the secret</dd><dt>Returns</dt><dd>a new secret object or NULL in case of failure. If the secret cannot be found, then <a href="libvirt-virterror.html#VIR_ERR_NO_SECRET">VIR_ERR_NO_SECRET</a> error is raised.</dd></dl><div class="acl"></div><h3><a name="virSecretLookupByUUIDString" id="virSecretLookupByUUIDString"><code>virSecretLookupByUUIDString</code></a><a class="headerlink" href="#virSecretLookupByUUIDString" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span>	virSecretLookupByUUIDString	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn,
						 <span class="type">const char *</span> uuidstr)</pre><div class="description"><p>Try to lookup a secret on the given hypervisor based on its UUID. Uses the printable string value to describe the UUID</p><p><a href="libvirt-libvirt-secret.html#virSecretFree">virSecretFree</a> should be used to free the resources after the secret object is no longer needed.</p></div><dl class="variablelist"><dt>conn</dt><dd>pointer to the hypervisor connection</dd><dt>uuidstr</dt><dd>the string UUID for the secret</dd><dt>Returns</dt><dd>a new secret object or NULL in case of failure. If the secret cannot be found, then <a href="libvirt-virterror.html#VIR_ERR_NO_SECRET">VIR_ERR_NO_SECRET</a> error is raised.</dd></dl><div class="acl"></div><h3><a name="virSecretLookupByUsage" id="virSecretLookupByUsage"><code>virSecretLookupByUsage</code></a><a class="headerlink" href="#virSecretLookupByUsage" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span>	virSecretLookupByUsage	(<span class="type"><a href="libvirt-libvirt-host.html#virConnectPtr">virConnectPtr</a></span> conn,
					 <span class="type">int</span> usageType,
					 <span class="type">const char *</span> usageID)</pre><div class="description"><p>Try to lookup a secret on the given hypervisor based on its usage The usageID is unique within the set of secrets sharing the same usageType value.</p><p><a href="libvirt-libvirt-secret.html#virSecretFree">virSecretFree</a> should be used to free the resources after the secret object is no longer needed.</p></div><dl class="variablelist"><dt>conn</dt><dd>pointer to the hypervisor connection</dd><dt>usageType</dt><dd>the type of secret usage</dd><dt>usageID</dt><dd>identifier of the object using the secret</dd><dt>Returns</dt><dd>a new secret object or NULL in case of failure. If the secret cannot be found, then <a href="libvirt-virterror.html#VIR_ERR_NO_SECRET">VIR_ERR_NO_SECRET</a> error is raised.</dd></dl><div class="acl"></div><h3><a name="virSecretRef" id="virSecretRef"><code>virSecretRef</code></a><a class="headerlink" href="#virSecretRef" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virSecretRef			(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)</pre><div class="description"><p>Increment the reference count on the secret. For each additional call to this method, there shall be a corresponding call to <a href="libvirt-libvirt-secret.html#virSecretFree">virSecretFree</a> to release the reference count, once the caller no longer needs the reference to this object.</p><p>This method is typically useful for applications where multiple threads are using a connection, and it is required that the connection remain open until all threads have finished using it. ie, each new thread using a secret would increment the reference count.</p></div><dl class="variablelist"><dt>secret</dt><dd>the secret to hold a reference on</dd><dt>Returns</dt><dd>0 in case of success, -1 in case of failure.</dd></dl><div class="acl"></div><h3><a name="virSecretSetValue" id="virSecretSetValue"><code>virSecretSetValue</code></a><a class="headerlink" href="#virSecretSetValue" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virSecretSetValue		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret,
					 <span class="type">const unsigned char *</span> value,
					 <span class="type">size_t</span> value_size,
					 <span class="type">unsigned int</span> flags)</pre><div class="description"><p>Sets the value of a secret.</p></div><dl class="variablelist"><dt>secret</dt><dd>A <a href="libvirt-libvirt-secret.html#virSecret">virSecret</a> secret</dd><dt>value</dt><dd>Value of the secret</dd><dt>value_size</dt><dd>Size of the value</dd><dt>flags</dt><dd>extra flags; not used yet, so callers should always pass 0</dd><dt>Returns</dt><dd>0 on success, -1 on failure.</dd></dl><div class="acl"></div><h3><a name="virSecretUndefine" id="virSecretUndefine"><code>virSecretUndefine</code></a><a class="headerlink" href="#virSecretUndefine" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virSecretUndefine		(<span class="type"><a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a></span> secret)</pre><div class="description"><p>Deletes the specified secret. This does not free the associated <a href="libvirt-libvirt-secret.html#virSecretPtr">virSecretPtr</a> object.</p></div><dl class="variablelist"><dt>secret</dt><dd>A <a href="libvirt-libvirt-secret.html#virSecret">virSecret</a> secret</dd><dt>Returns</dt><dd>0 on success, -1 on failure.</dd></dl><div class="acl"></div></div></div><div id="footer"><p id="sponsor">
	    Sponsored by:<br /><a href="http://et.redhat.com/"><img src="../et.png" alt="Project sponsored by Red Hat Emerging Technology" /></a></p></div></body></html>
