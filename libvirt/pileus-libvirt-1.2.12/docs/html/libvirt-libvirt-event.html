<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!--
        This file is autogenerated from html/libvirt-libvirt-event.html.in
        Do not edit this file. Changes will be lost.
      --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" type="text/css" href="../main.css" /><link rel="SHORTCUT ICON" href="../32favicon.png" /><title>libvirt: Module libvirt-event from libvirt</title><meta name="description" content="libvirt, virtualization, virtualization API" /></head><body><div id="header"><div id="headerLogo"></div><div id="headerSearch"><form action="../search.php" enctype="application/x-www-form-urlencoded" method="get"><div><input id="query" name="query" type="text" size="12" value="" /><input id="submit" name="submit" type="submit" value="Search" /></div></form></div></div><div id="body"><div id="menu"><ul class="l0"><li><div><a title="Front page of the libvirt website" class="inactive" href="../index.html">Home</a></div></li><li><div><a title="Details of new features and bugs fixed in each release" class="inactive" href="../news.html">News</a></div></li><li><div><a title="Applications known to use libvirt" class="inactive" href="../apps.html">Applications</a></div></li><li><div><a title="Get the latest source releases, binary builds and get access to the source repository" class="inactive" href="../downloads.html">Downloads</a></div></li><li><div><a title="Information for users, administrators and developers" class="active" href="../docs.html">Documentation</a><ul class="l1"><li><div><a title="How to compile libvirt" class="inactive" href="../compiling.html">Compiling</a></div></li><li><div><a title="Information about deploying and using libvirt" class="inactive" href="../deployment.html">Deployment</a></div></li><li><div><a title="Overview of the logical subsystems in the libvirt API" class="inactive" href="../intro.html">Architecture</a></div></li><li><div><a title="Description of the XML formats used in libvirt" class="inactive" href="../format.html">XML format</a></div></li><li><div><a title="Hypervisor specific driver information" class="inactive" href="../drivers.html">Drivers</a></div></li><li><div><a title="Reference manual for the C public API" class="active" href="../html/index.html">API reference</a><ul class="l2"><li><div><a title="domain APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-domain.html">Domain</a></div></li><li><div><a title="domain snapshot APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-domain-snapshot.html">Domain snapshot</a></div></li><li><div><a title="error handling APIs for the libvirt library" class="inactive" href="../html/libvirt-virterror.html">Error</a></div></li><li><div><span class="active">Event</span></div></li><li><div><a title="host APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-host.html">Host</a></div></li><li><div><a title="interface APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-interface.html">Interface</a></div></li><li><div><a title="network APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-network.html">Network</a></div></li><li><div><a title="node device APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-nodedev.html">Node device</a></div></li><li><div><a title="network filter APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-nwfilter.html">Network filter</a></div></li><li><div><a title="secret APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-secret.html">Secret</a></div></li><li><div><a title="storage APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-storage.html">Storage</a></div></li><li><div><a title="stream APIs for the libvirt library" class="inactive" href="../html/libvirt-libvirt-stream.html">Stream</a></div></li><li><div><a title="matrix of API support per hypervisor per release" class="inactive" href="../hvsupport.html">Driver support</a></div></li></ul></div></li><li><div><a title="Bindings of the libvirt API for other languages" class="inactive" href="../bindings.html">Language bindings</a></div></li><li><div><a title="Working on the internals of libvirt API, driver and daemon code" class="inactive" href="../internals.html">Internals</a></div></li><li><div><a title="A guide and reference for developing with libvirt" class="inactive" href="../devguide.html">Development Guide</a></div></li><li><div><a title="Command reference for virsh" class="inactive" href="../virshcmdref.html">Virsh Commands</a></div></li><li><div><a title="Project governance and code of conduct" class="inactive" href="../governance.html">Governance</a></div></li></ul></div></li><li><div><a title="User contributed content" class="inactive" href="http://wiki.libvirt.org">Wiki</a></div></li><li><div><a title="Frequently asked questions" class="inactive" href="http://wiki.libvirt.org/page/FAQ">FAQ</a></div></li><li><div><a title="How and where to report bugs and request features" class="inactive" href="../bugs.html">Bug reports</a></div></li><li><div><a title="How to contact the developers via email and IRC" class="inactive" href="../contact.html">Contact</a></div></li><li><div><a title="Available test suites for libvirt" class="inactive" href="../testsuites.html">Test suites</a></div></li><li><div><a title="Miscellaneous links of interest related to libvirt" class="inactive" href="../relatedlinks.html">Related Links</a></div></li><li><div><a title="Overview of all content on the website" class="inactive" href="../sitemap.html">Sitemap</a></div></li></ul></div><div id="content"><h1>Module libvirt-event from libvirt</h1><p>Provides APIs for the management of events</p><h2>Table of Contents</h2><h3><a href="#types">Types</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="keyword">enum</span> <a href="#virEventHandleType">virEventHandleType</a>
</pre><h3><a href="#functions">Functions</a></h3><pre class="api"><span class="type">int</span>	<a href="#virEventAddHandle">virEventAddHandle</a>		(<span class="type">int</span> fd, <br />					 <span class="type">int</span> events, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventHandleCallback">virEventHandleCallback</a></span> cb, <br />					 <span class="type">void *</span> opaque, <br />					 <span class="type"><a href="libvirt-libvirt-host.html#virFreeCallback">virFreeCallback</a></span> ff)
<span class="keyword">typedef</span> <a href="#virEventAddHandleFunc">virEventAddHandleFunc</a>
<span class="type">int</span>	<a href="#virEventAddHandleFunc">virEventAddHandleFunc</a>		(<span class="type">int</span> fd, <br />					 <span class="type">int</span> event, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventHandleCallback">virEventHandleCallback</a></span> cb, <br />					 <span class="type">void *</span> opaque, <br />					 <span class="type"><a href="libvirt-libvirt-host.html#virFreeCallback">virFreeCallback</a></span> ff)

<span class="type">int</span>	<a href="#virEventAddTimeout">virEventAddTimeout</a>		(<span class="type">int</span> timeout, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventTimeoutCallback">virEventTimeoutCallback</a></span> cb, <br />					 <span class="type">void *</span> opaque, <br />					 <span class="type"><a href="libvirt-libvirt-host.html#virFreeCallback">virFreeCallback</a></span> ff)
<span class="keyword">typedef</span> <a href="#virEventAddTimeoutFunc">virEventAddTimeoutFunc</a>
<span class="type">int</span>	<a href="#virEventAddTimeoutFunc">virEventAddTimeoutFunc</a>		(<span class="type">int</span> timeout, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventTimeoutCallback">virEventTimeoutCallback</a></span> cb, <br />					 <span class="type">void *</span> opaque, <br />					 <span class="type"><a href="libvirt-libvirt-host.html#virFreeCallback">virFreeCallback</a></span> ff)

<span class="keyword">typedef</span> <a href="#virEventHandleCallback">virEventHandleCallback</a>
<span class="type">void</span>	<a href="#virEventHandleCallback">virEventHandleCallback</a>		(<span class="type">int</span> watch, <br />					 <span class="type">int</span> fd, <br />					 <span class="type">int</span> events, <br />					 <span class="type">void *</span> opaque)

<span class="type">int</span>	<a href="#virEventRegisterDefaultImpl">virEventRegisterDefaultImpl</a>	(<span class="type">void</span>)
<span class="type">void</span>	<a href="#virEventRegisterImpl">virEventRegisterImpl</a>		(<span class="type"><a href="libvirt-libvirt-event.html#virEventAddHandleFunc">virEventAddHandleFunc</a></span> addHandle, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventUpdateHandleFunc">virEventUpdateHandleFunc</a></span> updateHandle, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventRemoveHandleFunc">virEventRemoveHandleFunc</a></span> removeHandle, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventAddTimeoutFunc">virEventAddTimeoutFunc</a></span> addTimeout, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventUpdateTimeoutFunc">virEventUpdateTimeoutFunc</a></span> updateTimeout, <br />					 <span class="type"><a href="libvirt-libvirt-event.html#virEventRemoveTimeoutFunc">virEventRemoveTimeoutFunc</a></span> removeTimeout)
<span class="type">int</span>	<a href="#virEventRemoveHandle">virEventRemoveHandle</a>		(<span class="type">int</span> watch)
<span class="keyword">typedef</span> <a href="#virEventRemoveHandleFunc">virEventRemoveHandleFunc</a>
<span class="type">int</span>	<a href="#virEventRemoveHandleFunc">virEventRemoveHandleFunc</a>	(<span class="type">int</span> watch)

<span class="type">int</span>	<a href="#virEventRemoveTimeout">virEventRemoveTimeout</a>		(<span class="type">int</span> timer)
<span class="keyword">typedef</span> <a href="#virEventRemoveTimeoutFunc">virEventRemoveTimeoutFunc</a>
<span class="type">int</span>	<a href="#virEventRemoveTimeoutFunc">virEventRemoveTimeoutFunc</a>	(<span class="type">int</span> timer)

<span class="type">int</span>	<a href="#virEventRunDefaultImpl">virEventRunDefaultImpl</a>		(<span class="type">void</span>)
<span class="keyword">typedef</span> <a href="#virEventTimeoutCallback">virEventTimeoutCallback</a>
<span class="type">void</span>	<a href="#virEventTimeoutCallback">virEventTimeoutCallback</a>		(<span class="type">int</span> timer, <br />					 <span class="type">void *</span> opaque)

<span class="type">void</span>	<a href="#virEventUpdateHandle">virEventUpdateHandle</a>		(<span class="type">int</span> watch, <br />					 <span class="type">int</span> events)
<span class="keyword">typedef</span> <a href="#virEventUpdateHandleFunc">virEventUpdateHandleFunc</a>
<span class="type">void</span>	<a href="#virEventUpdateHandleFunc">virEventUpdateHandleFunc</a>	(<span class="type">int</span> watch, <br />					 <span class="type">int</span> event)

<span class="type">void</span>	<a href="#virEventUpdateTimeout">virEventUpdateTimeout</a>		(<span class="type">int</span> timer, <br />					 <span class="type">int</span> timeout)
<span class="keyword">typedef</span> <a href="#virEventUpdateTimeoutFunc">virEventUpdateTimeoutFunc</a>
<span class="type">void</span>	<a href="#virEventUpdateTimeoutFunc">virEventUpdateTimeoutFunc</a>	(<span class="type">int</span> timer, <br />					 <span class="type">int</span> timeout)

</pre><h2>Description</h2><h3><a name="types" id="types">Types</a><a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3><h3><a name="virEventHandleType" id="virEventHandleType"><code>virEventHandleType</code></a><a class="headerlink" href="#virEventHandleType" title="Permalink to this headline">¶</a></h3><div class="api"><pre><span class="keyword">enum</span> virEventHandleType {
</pre><table><tr><td><a name="VIR_EVENT_HANDLE_READABLE" id="VIR_EVENT_HANDLE_READABLE">VIR_EVENT_HANDLE_READABLE</a></td><td> = </td><td>1</td></tr><tr><td><a name="VIR_EVENT_HANDLE_WRITABLE" id="VIR_EVENT_HANDLE_WRITABLE">VIR_EVENT_HANDLE_WRITABLE</a></td><td> = </td><td>2</td></tr><tr><td><a name="VIR_EVENT_HANDLE_ERROR" id="VIR_EVENT_HANDLE_ERROR">VIR_EVENT_HANDLE_ERROR</a></td><td> = </td><td>4</td></tr><tr><td><a name="VIR_EVENT_HANDLE_HANGUP" id="VIR_EVENT_HANDLE_HANGUP">VIR_EVENT_HANDLE_HANGUP</a></td><td> = </td><td>8</td></tr></table><pre>}
</pre></div><h3><a name="functions" id="functions">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3><h3><a name="virEventAddHandle" id="virEventAddHandle"><code>virEventAddHandle</code></a><a class="headerlink" href="#virEventAddHandle" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virEventAddHandle		(<span class="type">int</span> fd,
					 <span class="type">int</span> events,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventHandleCallback">virEventHandleCallback</a></span> cb,
					 <span class="type">void *</span> opaque,
					 <span class="type"><a href="libvirt-libvirt-host.html#virFreeCallback">virFreeCallback</a></span> ff)</pre><div class="description"><p>Register a callback for monitoring file handle events. This function requires that an event loop has previously been registered with <a href="libvirt-libvirt-event.html#virEventRegisterImpl">virEventRegisterImpl</a>() or <a href="libvirt-libvirt-event.html#virEventRegisterDefaultImpl">virEventRegisterDefaultImpl</a>().</p></div><dl class="variablelist"><dt>fd</dt><dd>file handle to monitor for events</dd><dt>events</dt><dd>bitset of events to watch from <a href="libvirt-libvirt-event.html#virEventHandleType">virEventHandleType</a> constants</dd><dt>cb</dt><dd>callback to invoke when an event occurs</dd><dt>opaque</dt><dd>user data to pass to callback</dd><dt>ff</dt><dd>callback to free opaque when handle is removed</dd><dt>Returns</dt><dd>-1 if the file handle cannot be registered, otherwise a handle watch number to be used for updating and unregistering for events.</dd></dl><div class="acl"></div><h3><a name="virEventAddHandleFunc" id="virEventAddHandleFunc"><code>virEventAddHandleFunc</code></a><a class="headerlink" href="#virEventAddHandleFunc" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="type">int</span>	(*virEventAddHandleFunc	)	(<span class="type">int</span> fd,
					 <span class="type">int</span> event,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventHandleCallback">virEventHandleCallback</a></span> cb,
					 <span class="type">void *</span> opaque,
					 <span class="type"><a href="libvirt-libvirt-host.html#virFreeCallback">virFreeCallback</a></span> ff)
</pre><div class="description"><p>Part of the EventImpl, this callback adds a file handle callback to listen for specific events. The same file handle can be registered multiple times provided the requested event sets are non-overlapping</p><p>If the opaque user data requires free'ing when the handle is unregistered, then a 2nd callback can be supplied for this purpose. This callback needs to be invoked from a clean stack. If 'ff' callbacks are invoked directly from the <a href="libvirt-libvirt-event.html#virEventRemoveHandleFunc">virEventRemoveHandleFunc</a> they will likely deadlock in libvirt.</p></div><dl class="variablelist"><dt>fd</dt><dd>file descriptor to listen on</dd><dt>event</dt><dd>bitset of events on which to fire the callback</dd><dt>cb</dt><dd>the callback to be called when an event occurrs</dd><dt>opaque</dt><dd>user data to pass to the callback</dd><dt>ff</dt><dd>the callback invoked to free opaque data blob</dd><dt>Returns</dt><dd>-1 if the file handle cannot be registered, otherwise a handle watch number to be used for updating and unregistering for events</dd></dl><br /><h3><a name="virEventAddTimeout" id="virEventAddTimeout"><code>virEventAddTimeout</code></a><a class="headerlink" href="#virEventAddTimeout" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virEventAddTimeout		(<span class="type">int</span> timeout,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventTimeoutCallback">virEventTimeoutCallback</a></span> cb,
					 <span class="type">void *</span> opaque,
					 <span class="type"><a href="libvirt-libvirt-host.html#virFreeCallback">virFreeCallback</a></span> ff)</pre><div class="description"><p>Register a callback for a timer event. This function requires that an event loop has previously been registered with <a href="libvirt-libvirt-event.html#virEventRegisterImpl">virEventRegisterImpl</a>() or <a href="libvirt-libvirt-event.html#virEventRegisterDefaultImpl">virEventRegisterDefaultImpl</a>().</p><p>Setting @timeout to -1 will disable the timer. Setting @timeout to zero will cause it to fire on every event loop iteration.</p></div><dl class="variablelist"><dt>timeout</dt><dd>time between events in milliseconds</dd><dt>cb</dt><dd>callback to invoke when an event occurs</dd><dt>opaque</dt><dd>user data to pass to callback</dd><dt>ff</dt><dd>callback to free opaque when timeout is removed</dd><dt>Returns</dt><dd>-1 if the timer cannot be registered, a positive integer timer id upon success.</dd></dl><div class="acl"></div><h3><a name="virEventAddTimeoutFunc" id="virEventAddTimeoutFunc"><code>virEventAddTimeoutFunc</code></a><a class="headerlink" href="#virEventAddTimeoutFunc" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="type">int</span>	(*virEventAddTimeoutFunc	)	(<span class="type">int</span> timeout,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventTimeoutCallback">virEventTimeoutCallback</a></span> cb,
					 <span class="type">void *</span> opaque,
					 <span class="type"><a href="libvirt-libvirt-host.html#virFreeCallback">virFreeCallback</a></span> ff)
</pre><div class="description"><p>Part of the EventImpl, this user-defined callback handles adding an event timeout.</p><p>If the opaque user data requires free'ing when the handle is unregistered, then a 2nd callback can be supplied for this purpose.</p></div><dl class="variablelist"><dt>timeout</dt><dd>The timeout to monitor</dd><dt>cb</dt><dd>the callback to call when timeout has expired</dd><dt>opaque</dt><dd>user data to pass to the callback</dd><dt>ff</dt><dd>the callback invoked to free opaque data blob</dd><dt>Returns</dt><dd>a timer value</dd></dl><br /><h3><a name="virEventHandleCallback" id="virEventHandleCallback"><code>virEventHandleCallback</code></a><a class="headerlink" href="#virEventHandleCallback" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="type">void</span>	(*virEventHandleCallback	)	(<span class="type">int</span> watch,
					 <span class="type">int</span> fd,
					 <span class="type">int</span> events,
					 <span class="type">void *</span> opaque)
</pre><div class="description"><p>Callback for receiving file handle events. The callback will be invoked once for each event which is pending.</p></div><dl class="variablelist"><dt>watch</dt><dd>watch on which the event occurred</dd><dt>fd</dt><dd>file handle on which the event occurred</dd><dt>events</dt><dd>bitset of events from <a href="libvirt-libvirt-event.html#virEventHandleType">virEventHandleType</a> constants</dd><dt>opaque</dt><dd>user data registered with handle</dd></dl><br /><h3><a name="virEventRegisterDefaultImpl" id="virEventRegisterDefaultImpl"><code>virEventRegisterDefaultImpl</code></a><a class="headerlink" href="#virEventRegisterDefaultImpl" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virEventRegisterDefaultImpl	(<span class="type">void</span>)</pre><div class="description"><p>Registers a default event implementation based on the poll() system call. This is a generic implementation that can be used by any client application which does not have a need to integrate with an external event loop impl.</p><p>Once registered, the application has to invoke <a href="libvirt-libvirt-event.html#virEventRunDefaultImpl">virEventRunDefaultImpl</a>() in a loop to process events. Failure to do so may result in connections being closed unexpectedly as a result of keepalive timeout. The default event loop fully supports handle and timeout events, but only wakes up on events registered by libvirt API calls such as <a href="libvirt-libvirt-event.html#virEventAddHandle">virEventAddHandle</a>() or <a href="libvirt-libvirt-domain.html#virConnectDomainEventRegisterAny">virConnectDomainEventRegisterAny</a>().</p></div><dl class="variablelist"><dt>Returns</dt><dd>0 on success, -1 on failure.</dd></dl><div class="acl"></div><h3><a name="virEventRegisterImpl" id="virEventRegisterImpl"><code>virEventRegisterImpl</code></a><a class="headerlink" href="#virEventRegisterImpl" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">void</span>	virEventRegisterImpl		(<span class="type"><a href="libvirt-libvirt-event.html#virEventAddHandleFunc">virEventAddHandleFunc</a></span> addHandle,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventUpdateHandleFunc">virEventUpdateHandleFunc</a></span> updateHandle,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventRemoveHandleFunc">virEventRemoveHandleFunc</a></span> removeHandle,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventAddTimeoutFunc">virEventAddTimeoutFunc</a></span> addTimeout,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventUpdateTimeoutFunc">virEventUpdateTimeoutFunc</a></span> updateTimeout,
					 <span class="type"><a href="libvirt-libvirt-event.html#virEventRemoveTimeoutFunc">virEventRemoveTimeoutFunc</a></span> removeTimeout)</pre><div class="description"><p>Registers an event implementation, to allow integration with an external event loop. Applications would use this to integrate with the libglib2 event loop, or libevent or the QT event loop.</p><p>Use of the <a href="libvirt-libvirt-event.html#virEventAddHandle">virEventAddHandle</a>() and similar APIs require that the corresponding handler is registered. Use of the <a href="libvirt-libvirt-domain.html#virConnectDomainEventRegisterAny">virConnectDomainEventRegisterAny</a>() and similar APIs requires that the three timeout handlers are registered. Likewise, the three timeout handlers must be registered if the remote server has been configured to send keepalive messages, or if the client intends to call <a href="libvirt-libvirt-host.html#virConnectSetKeepAlive">virConnectSetKeepAlive</a>(), to avoid either side from unexpectedly closing the connection due to inactivity.</p><p>If an application does not need to integrate with an existing event loop implementation, then the <a href="libvirt-libvirt-event.html#virEventRegisterDefaultImpl">virEventRegisterDefaultImpl</a>() method can be used to setup the generic libvirt implementation.</p></div><dl class="variablelist"><dt>addHandle</dt><dd>the callback to add fd handles</dd><dt>updateHandle</dt><dd>the callback to update fd handles</dd><dt>removeHandle</dt><dd>the callback to remove fd handles</dd><dt>addTimeout</dt><dd>the callback to add a timeout</dd><dt>updateTimeout</dt><dd>the callback to update a timeout</dd><dt>removeTimeout</dt><dd>the callback to remove a timeout</dd></dl><div class="acl"></div><h3><a name="virEventRemoveHandle" id="virEventRemoveHandle"><code>virEventRemoveHandle</code></a><a class="headerlink" href="#virEventRemoveHandle" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virEventRemoveHandle		(<span class="type">int</span> watch)</pre><div class="description"><p>Unregister a callback from a file handle. This function requires that an event loop has previously been registered with <a href="libvirt-libvirt-event.html#virEventRegisterImpl">virEventRegisterImpl</a>() or <a href="libvirt-libvirt-event.html#virEventRegisterDefaultImpl">virEventRegisterDefaultImpl</a>().</p></div><dl class="variablelist"><dt>watch</dt><dd>watch whose file handle to remove</dd><dt>Returns</dt><dd>-1 if the file handle was not registered, 0 upon success.</dd></dl><div class="acl"></div><h3><a name="virEventRemoveHandleFunc" id="virEventRemoveHandleFunc"><code>virEventRemoveHandleFunc</code></a><a class="headerlink" href="#virEventRemoveHandleFunc" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="type">int</span>	(*virEventRemoveHandleFunc)	(<span class="type">int</span> watch)
</pre><div class="description"><p>Part of the EventImpl, this user-provided callback is notified when an fd is no longer being listened on.</p><p>If a virEventHandleFreeFunc was supplied when the handle was registered, it will be invoked some time during, or after this function call, when it is safe to release the user data.</p></div><dl class="variablelist"><dt>watch</dt><dd>file descriptor watch to stop listening on</dd><dt>Returns</dt><dd>-1 if the file handle was not registered, 0 upon success</dd></dl><br /><h3><a name="virEventRemoveTimeout" id="virEventRemoveTimeout"><code>virEventRemoveTimeout</code></a><a class="headerlink" href="#virEventRemoveTimeout" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virEventRemoveTimeout		(<span class="type">int</span> timer)</pre><div class="description"><p>Unregister a callback for a timer. This function requires that an event loop has previously been registered with <a href="libvirt-libvirt-event.html#virEventRegisterImpl">virEventRegisterImpl</a>() or <a href="libvirt-libvirt-event.html#virEventRegisterDefaultImpl">virEventRegisterDefaultImpl</a>().</p></div><dl class="variablelist"><dt>timer</dt><dd>the timer id to remove</dd><dt>Returns</dt><dd>-1 if the timer was not registered, 0 upon success.</dd></dl><div class="acl"></div><h3><a name="virEventRemoveTimeoutFunc" id="virEventRemoveTimeoutFunc"><code>virEventRemoveTimeoutFunc</code></a><a class="headerlink" href="#virEventRemoveTimeoutFunc" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="type">int</span>	(*virEventRemoveTimeoutFunc)	(<span class="type">int</span> timer)
</pre><div class="description"><p>Part of the EventImpl, this user-defined callback removes a timer</p><p>If a virEventTimeoutFreeFunc was supplied when the handle was registered, it will be invoked some time during, or after this function call, when it is safe to release the user data.</p></div><dl class="variablelist"><dt>timer</dt><dd>the timer to remove</dd><dt>Returns</dt><dd>0 on success, -1 on failure</dd></dl><br /><h3><a name="virEventRunDefaultImpl" id="virEventRunDefaultImpl"><code>virEventRunDefaultImpl</code></a><a class="headerlink" href="#virEventRunDefaultImpl" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">int</span>	virEventRunDefaultImpl		(<span class="type">void</span>)</pre><div class="description"><p>Run one iteration of the event loop. Applications will generally want to have a thread which invokes this method in an infinite loop. Furthermore, it is wise to set up a pipe-to-self handler (via <a href="libvirt-libvirt-event.html#virEventAddHandle">virEventAddHandle</a>()) or a timeout (via <a href="libvirt-libvirt-event.html#virEventAddTimeout">virEventAddTimeout</a>()) before calling this function, as it will block forever if there are no registered events.</p><pre class="code">static bool quit;

while (!quit) {
  if (virEventRunDefaultImpl() &lt; 0)
    ...print error...
}</pre></div><dl class="variablelist"><dt>Returns</dt><dd>0 on success, -1 on failure.</dd></dl><div class="acl"></div><h3><a name="virEventTimeoutCallback" id="virEventTimeoutCallback"><code>virEventTimeoutCallback</code></a><a class="headerlink" href="#virEventTimeoutCallback" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="type">void</span>	(*virEventTimeoutCallback	)	(<span class="type">int</span> timer,
					 <span class="type">void *</span> opaque)
</pre><div class="description"><p>callback for receiving timer events</p></div><dl class="variablelist"><dt>timer</dt><dd>timer id emitting the event</dd><dt>opaque</dt><dd>user data registered with handle</dd></dl><br /><h3><a name="virEventUpdateHandle" id="virEventUpdateHandle"><code>virEventUpdateHandle</code></a><a class="headerlink" href="#virEventUpdateHandle" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">void</span>	virEventUpdateHandle		(<span class="type">int</span> watch,
					 <span class="type">int</span> events)</pre><div class="description"><p>Change event set for a monitored file handle. This function requires that an event loop has previously been registered with <a href="libvirt-libvirt-event.html#virEventRegisterImpl">virEventRegisterImpl</a>() or <a href="libvirt-libvirt-event.html#virEventRegisterDefaultImpl">virEventRegisterDefaultImpl</a>().</p><p>Will not fail if fd exists.</p></div><dl class="variablelist"><dt>watch</dt><dd>watch whose file handle to update</dd><dt>events</dt><dd>bitset of events to watch from <a href="libvirt-libvirt-event.html#virEventHandleType">virEventHandleType</a> constants</dd></dl><div class="acl"></div><h3><a name="virEventUpdateHandleFunc" id="virEventUpdateHandleFunc"><code>virEventUpdateHandleFunc</code></a><a class="headerlink" href="#virEventUpdateHandleFunc" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="type">void</span>	(*virEventUpdateHandleFunc)	(<span class="type">int</span> watch,
					 <span class="type">int</span> event)
</pre><div class="description"><p>Part of the EventImpl, this user-provided callback is notified when events to listen on change</p></div><dl class="variablelist"><dt>watch</dt><dd>file descriptor watch to modify</dd><dt>event</dt><dd>new events to listen on</dd></dl><br /><h3><a name="virEventUpdateTimeout" id="virEventUpdateTimeout"><code>virEventUpdateTimeout</code></a><a class="headerlink" href="#virEventUpdateTimeout" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="type">void</span>	virEventUpdateTimeout		(<span class="type">int</span> timer,
					 <span class="type">int</span> timeout)</pre><div class="description"><p>Change frequency for a timer. This function requires that an event loop has previously been registered with <a href="libvirt-libvirt-event.html#virEventRegisterImpl">virEventRegisterImpl</a>() or <a href="libvirt-libvirt-event.html#virEventRegisterDefaultImpl">virEventRegisterDefaultImpl</a>().</p><p>Setting frequency to -1 will disable the timer. Setting the frequency to zero will cause it to fire on every event loop iteration.</p><p>Will not fail if timer exists.</p></div><dl class="variablelist"><dt>timer</dt><dd>timer id to change</dd><dt>timeout</dt><dd>time between events in milliseconds</dd></dl><div class="acl"></div><h3><a name="virEventUpdateTimeoutFunc" id="virEventUpdateTimeoutFunc"><code>virEventUpdateTimeoutFunc</code></a><a class="headerlink" href="#virEventUpdateTimeoutFunc" title="Permalink to this headline">¶</a></h3><pre class="api"><span class="keyword">typedef</span> <span class="type">void</span>	(*virEventUpdateTimeoutFunc)	(<span class="type">int</span> timer,
					 <span class="type">int</span> timeout)
</pre><div class="description"><p>Part of the EventImpl, this user-defined callback updates an event timeout.</p></div><dl class="variablelist"><dt>timer</dt><dd>the timer to modify</dd><dt>timeout</dt><dd>the new timeout value</dd></dl><br /></div></div><div id="footer"><p id="sponsor">
	    Sponsored by:<br /><a href="http://et.redhat.com/"><img src="../et.png" alt="Project sponsored by Red Hat Emerging Technology" /></a></p></div></body></html>
